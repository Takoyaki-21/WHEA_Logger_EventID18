# WHEA Logger EventID 18 エラー備忘録(2024/01/03時点)

### ■環境  
OS   / Windows11 pro  
CPU  / AMD Ryzen 7 5700X  
MB   / B550M Phantom Gaming 4  
メモリ / W4U3200CS-16G * 2  
グラボ / RX 5600 XT  
電源  / Apexgaming AG-750M-JP  

### ■発生エラー  
致命的なハードウェア エラーが発生しました。  
  
コンポーネントによる報告: プロセッサ コア  
エラー ソース: Machine Check Exception  
エラーの種類: Cache Hierarchy Error  
プロセッサ APIC ID: n  
  
詳細は、このエントリの詳細ビューに含まれています。  
※プロセッサ APIC IDの数値は変動あり  

このエラーが発生したタイミングくらいでPCが再起動を繰り返している状況  

### ■原因(推測)  
RX 5600 XT のDriverを更新するためにインストールしたAMDの管理ソフト  
Adrenalin関連か、DriverそのものがWindowsの更新と競合していると思われる  
  
#### ●推測経緯  
WHEA Logger発生後、デバイスマネージャを確認すると、ほぼ高確率で RX 5600 XTが  
無効の状態になっていたことから、グラボ周りの要因を疑う  
  
### ■回避策  
AMDサイトからのドライバー更新を行わず、Windows11で自動取得されるドライバを  
そのまま利用する  
※AMD Adrenalin関連のソフト、サービスやタスクスケジューラは削除しておく  
 特にサービスの AMD Crash Defender Service とタスクスケジューラは残りやすいので注意  
  
### ■根本対処  
#### ▽改善したと思われる作業(3か月ほど様子見したが、WHEAは発生せず)  
AMD オフラインインストーラーのexeを解凍して、"ドライバのみ"抽出  
抽出したドライバだけで更新。  
exeの実行ではなく、解凍ソフトで中身のみ取り出してデバイスマネージャーから更新を行う  
-> サービスに AMD External Events Utility がどうしても入ってくる  
  
#### ▼改善がなかった作業  
WHEA Logger EventID 18 で検索した際に出てくるMB周りの電源設定  
※ただし影響有無は不明なため設定はそのままにしている  
  
AMD Adrenalinの定期的なチェック  
->オフラインインストーラーの最新バージョンで取得しなおしても改善がなかった  
  ->exeを実行し、"Driver Only"でインストールしてもAdrenalin関連のプログラムが必ず入る  
->オンラインインストーラーは何が引っかかっているのか不明だが、インストール時にエラーとなる  
  ※セキュリティ停止も取得できず  
